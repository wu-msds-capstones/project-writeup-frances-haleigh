[
  {
    "objectID": "capstone.html",
    "href": "capstone.html",
    "title": "United States’ Health Quality",
    "section": "",
    "text": "To help answer questions regarding the effectiveness of preventative care, we investigated current relationships between health care, access to care, public health insurance, and overall health outcomes across the United States. We explored how primary care and prevenatitive measures impact standard health metrics, such as life expectancy, mortality, and infant mortality. We compared these metrics across demographics and insurance models (public versus private). By examining these factors, we aimed to contribute to the understanding of how preventative care can help improve public health in the United States."
  },
  {
    "objectID": "capstone.html#data-ingestion",
    "href": "capstone.html#data-ingestion",
    "title": "United States’ Health Quality",
    "section": "Data Ingestion",
    "text": "Data Ingestion\nWe gathered data from two sources: KFF (an independent source for health policy research, polling, and news)⁶ and County Health Rankings and Roadmaps (CHRR).²\n\nKFF: Collection and Cleaning\nWe generated a custom report from data available on KFF, downloading a large variety of data from 2017-2022 (not including 2020 due to lack of data collection) for each state in the US. Variables we investigated from this dataset included percentage of population on Medicare, percentage of adults who smoke, healthcare expenditure, median annual household income, cervical cancer incidence rate, and many more potentially relevant factors.⁶\nKFF data for each state was downloaded as CSVs. We chose the most recent dates for all of the different health and insurance related questions between 2017-2022. The CSVs originally had a question, state, and value field. We used text parsing to create a column called demographic and a column called group. This allowed us to parse out demographics like age, race/ethnicity, poverty level and create groups within each of those.\nWe also created fields called year and measure, and parsed out the years and measurements from the question field. Some questions had multiple demographics, so we created a secondary_demographic field and a secondary_group field. These are not ranked.\nFinally, we added a county column (which we filled with all NA) and edited the state and question fields to replicate the way that data from our CHFF dataset was formatted. This allowed us to merge the two datasets.\n\n\nCHRR: Collection and Cleaning\nSimilar to KFF, we downloaded data for each state from 2017-2022 (not including 2020 due to lack of data collection) from County Health Rankings and Roadmaps (CHRR). We chose the “20xx County Health Release National Data” links for each year. Data from CHRR originally came in two separate CSVs for each year and broke up the data by each county in the United States. This data included metrics such as life_expectancy, age-adjusted_death_rate, years_of_potential_life_loss_rate, food_environment_index, percentage_of_physically_inactive_adults, percentage_of_excessive_drinking, Primary_Care_Provider_ratio, and much more.²\nFirst, we cleaned up the columns. We reviewed the documentation and renamed any potentially confusing column names. For example, #_Medicaid_Enrollees became no_female_medicaid_enrollees to avoid mistakenly believing the first column included both genders in its count. We dropped columns that would not be of help to us, such as the 95% CI - Low and 95% CI - High columns, as our dataset did not describe how these confidence intervals were found. We replaced all spaces with an underscore.\nSecond, we joined the two CSVs for each year to have one CSV per year and added a Year column to help with merging later.\nFinally, we reformatted the CSVs to match that of the KFF data, where our original columns became the question column and the values filled in a new values column. Again, we used text parsing such as grepl and gsub to fill in our newly created demographic, measure, group, secondary_demographic, and secondary_group, columns. For example, if our question was mean_%_Children_in_Poverty_(white), our demographic, group, secondary_demographic, and secondary_group columns became “Race/Ethnicity”, “White”, “Age”, and “0-17”, respectively.\nSince the questions and potential answers collected by CHRR data varied each year, we made sure that our cleaning code was modified for each year to both accommodate the changes in the data and match identical answers from previous years. As an example, the only races that were listed as options in the 2017 data were “White”, “Black”, “Hispanic”, and “Asian”. However, by the 2022 data collection, the options had expanded to include “American Indian/Alaskan Native”, “Native Hawaiian/Other Pacific Islander”, and “Other/Multiple Races.” In 2022, “Black” was changed to “African American,” so we changed it back to “Black” to both match the earlier CHRR data and the KFF data."
  },
  {
    "objectID": "capstone.html#data-organization",
    "href": "capstone.html#data-organization",
    "title": "United States’ Health Quality",
    "section": "Data Organization",
    "text": "Data Organization\nData was combined and normalized to third normal form. The ids were primary keys for each table except for question_responses, where state_id, year_id, and question_id were used as a compound primary key. We used the same foreign key for group and secondary_group and another separate foreign key for both type and secondary_type. All columns had a NOT NULL constraint except for unit_type from the unit table, and unit_id, secondary_group_id, and secondary_type_id from question_responses.\n\n\n\nERD."
  },
  {
    "objectID": "capstone.html#data-analysis",
    "href": "capstone.html#data-analysis",
    "title": "United States’ Health Quality",
    "section": "Data Analysis",
    "text": "Data Analysis\n\nStatistical Thinking\nWe determined health status using commonly used markers (proxies) such as life expectancy and mortality rates.³ We used statistics (log rank tests) and modeling (Kaplan-Meier curves and linear regression) to determine how access to preventative care correlates with health status. We compared proportions across states to account for differences in population.\nIn our linear models created in R, we first took the natural logarithm of income-related data due to both its skewed distribution and disproportionate scale (in comparison to the rest of our data).\n\n\n\n\n\n\nWhat are these statistical tests?\n\n\n\n\n\noptional text\n\n\n\n\n\n\n\n\nLog Rank Test\nKaplan-Meier Curve\nLinear Regression\n\n\n\n\ntext\ntext\ntext\n\n\n\n\n\n\n\n\nData Visualization\nWe used data visualization as part of both our exploratory data analysis and in our final outcome. We created maps of the United States to determine if there is a spatial relationship between our variables and quality of health. Various other visualizations were displayed from our statistical analysis and machine learning product, such as Kaplan-Meier curves, graphs of K-Best’s top features, confusion matrices, and K-Means and/or Gaussian Mixture Model scatterplots, where appropriate.\n\n\nData Engineering\nWe stored our data into a relational database and accessed it with Postgresql (through Railway). We accessed our data in both R and Python using the RPostgreSQL and sqlalchemy libraries, respectively. A detailed description for how this was done is in the data section above.\n\n\nMachine Learning\nWe used machine learning models such as ensembles, logistic regression, random forest, naive bayes, PCA, KMeans, Gaussian Mixture Models, and more to explore relationships and predict health outcomes from our data. For example, we predicted metrics like life expectancy based on our access to care variables. We also predicted the prevalence of common chronic conditions, such as Diabetes, within each state based on the percentage of people on Medicaid. Finally, we created a new variable that represented overall health quality.\n\n\n\n\n\n\nWhat are these models?\n\n\n\n\n\n\nModel Optimization\n\n\n\nK-Best Feature Selection\nConfusion Matrices\n\n\n\n\ntext\ntext\n\n\n\n\n\nSupervised Classification Models\n\n\n\n\n\n\n\n\n\nRandom Forests\nNaive Bayes\nLogistic Regression\nEnsemble\n\n\n\n\ntext\n\n\n\n\n\n\n\n\nUnsupervised Dimension Reduction Model\n\n\n\nPCA\n\n\n\n\ntext\n\n\n\n\n\nUnsupervised Clustering Models\n\n\n\nK-Means\nGaussian Mixture Model\n\n\n\n\ntext\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nProcess outline for predicting health by access to care:\n\n\n\n\n\n\nCreate our desired dataframe by reading in data from our remote database and joining where necessary.\nPreprocess:\n\nDrop NAs while optimizing data frame size via trial and error.\nUse StandardScaler and OneHotEncoder tools from sklearn to transform our numeric and categorical data, respectively.\n\nUse KMeans to find the top 10 features from each model (see Figure 1, @Supplemental_Figure_1B, and @Supplemental_Figure_1C). Combine these variables with significant variables from the linear regression models completed in R.\nContinue preprocessing with the reduced dataset (using only variables from step 3)\n\nBin and modify data as necessary. This ensured equal representation across classes for each predicted y variable. A. In order to use classification tools such as RandomForestClassifier or GradientBoostingClassifier, we binned all our data by quartiles before running it through our models. B. For life expectancy, we dropped outliers first (ages below 60 and above 90, see Supplemental Figure 1D).\nTrain/test split dataset\n\nCreate model\n\nUse LogisticRegression, RandomForestClassifier, GradientBoostingClassifier, CategoricalNaiveBayes, and Ensemble. Find which model performs the best.\nHyperparameterize the model that works best from step 5a.\nCross validate finalized model\nTest on testing data to find true accuracy\nConfusion matrix to see what went wrong (see Supplemental Figures 1E and 1F).\n\nAdd PCA to the model\n\nDetermine how many components explain 90% variance in the model (see Supplemental Figures 1G-1I).\nAdd PCA with that number of components to the optimized pipeline made from Step 5.\n\n\n\n\n\n\n\n\n\n\n\nProcess outline for predicting health by prevalence of a disease based on Medicaid-related variables:\n\n\n\n\n\n\nManipulate data to find mean prevalence of the disease by state. Use this state-wide data rather than the county data as the Medicaid covariates were only available by state.\nPreprocess, split, and model the data as outlined above.\n\n\n\n\n\n\n\n\n\n\nProcess outline for creating a new variable:\n\n\n\n\n\n\nGather our entire dataset (not just access to care related variables) See Supplemental Table 1B for a list of all variables used.\nPreprocess the dataset using StandardScaler and OneHotEncoder to the appropriate columns.\nUse PCA to see how much variance can be explained by the first eigenvalue (see Supplemental Figure 1J).\nProject desired health variables to the first eigenvalue.\nCompare weights of all variables to see how much they each contribute to this “new variable.”\n\n\n\n\n\n\nData Ethics\nWe were wary of furthering the gap between classes, races, and/or genders. Often, those in lower socioeconomic status tend to have lower quality of health and less access to affordable healthcare. Our goal was not to perpetuate this gap but to find potential solutions for these underserved populations. We also recognized that our datasets were incomplete and that we were not be able to represent everyone’s needs. Those who are not using well-known forms of insurance, such as Direct Primary Care, or who are not seeking traditional medical care are not represented."
  },
  {
    "objectID": "capstone.html#introduction-1",
    "href": "capstone.html#introduction-1",
    "title": "United States’ Health Quality",
    "section": "Introduction",
    "text": "Introduction\nIn order to evaluate the health status of a group of people, we turned to three common metrics for doing so: life expectancy, mortality, and infant mortality.³ In the following sections, we modeled each of these by a list of variables representing access to care (Supplemental Table 1A). Our goal was to determine how access to care influenced each of these three metrics for determining health of a population."
  },
  {
    "objectID": "capstone.html#analyzing-impact-of-access-to-care-on-health-metrics",
    "href": "capstone.html#analyzing-impact-of-access-to-care-on-health-metrics",
    "title": "United States’ Health Quality",
    "section": "Analyzing Impact of Access to Care on Health Metrics",
    "text": "Analyzing Impact of Access to Care on Health Metrics\n\nLife Expectancy\n\n\n\nFig 2A: Median Life Expectancy by State.\n\n\nFigure 2A demonstrates how median life expectancy varies by state. We decided to keep state in our linear model because it did have a significant correlation with life expectancy. Since not all of the states were significantly correlated, we created the following plot to show which states were significantly correlated (positively or negatively) with life expectancy, as is seen in Figure 2B.\n\n\n\nFigure 2B: Map of State Significance for Life Expectancy.\n\n\nFigure 2C shows our linear model for preventative healthcare measures and life expectancy. We found that Primary Care Physician (PCP) Rate and Ratio were both positively correlated with life expectancy. Percentage of Food Insecurity was negatively correlated with life expectancy (that is, as food insecurity increased, life expectancy decreased). Percentage of Access to Broadband Internet was also positively correlated with life expectancy.\nThese were all expected, but what was surprising was that the Residential Segregation Index was positively correlated with life expectancy but the opposite relationship was found for the Segregation Index. While we expected to see Segregation Index negatively correlated with life expectancy, it seems to be paradoxical that the opposite was true for the Residential Segregation Index. We realized that our Residential Segregation Index had a lot of missing values, so plotting it against life expectancy didn’t reveal any visible trend. To improve this model in the future, we would remove this predictor.\n\n\n\nFigure 2C: Life Expectancy Linear Model Coefficients.\n\n\nTo better understand the survival (life expectancy) of different groups for each of these variables, we created Kaplan-Meier (KM) Curves where we plotted each variable by quartile. We then conducted a log rank test to compare across quantiles to see if the groups were significantly different from each other. Figure 2D shows life expectancy based on the percentage of food insecurity. Figure 2E shows the results of the log rank test (which are significant as p = &lt;2e-16). Quantiles 1 and 2 (less food insecurity) observed less death than expected, but quantiles 3 and 4 (more food insecurity) observed more death than expected. This demonstrates that we are seeing a significant difference between life expectancy of people in the lower versus the higher quantiles of food insecurity.\n\n\n\nFigure 2D: Kaplan-Meier Curve for Life Expectancy and Percentage of Food Insecurity.\n\n\n\n\n\nFigure 5: Log Rank Test Results for Life Expectancy and Percentage of Food Insecurity.\n\n\nKaplan-Meier Curves for life expectancy were made with the following variables: PCP Rate and Ratio, Percentage of Food Insecurity, Segregation Index, and Percentage of Broadband Internet Access. Log rank tests were performed, and all of the results were significant. To explore the curves and log rank test results, please explore our gallery below:\n–add a gallery here but ran out of time–\nWe then used machine learning algorithms to predict life expectancy of individuals based on these significant covariates along with the top ten features found through KBest (see Supplemental Figure 1A). It is important to note that a lot of features were found in both the linear regression model explained above and in the KBest result.\nOur model predicted life expectancy based only on the fifteen significant access-to-care-related variables with 56% accuracy. While this may at first appear unimpressive, it’s important to note that 56% of life expectancy can be predicted or explained by only fifteen items- all of which relate to one’s access to healthcare. Only the remaining 44% can be explained by all other factors in a person’s life.\nUsing the clustering method KMeans, we found the predicted clusters of our life expectancy quartiles projected on its first two principle components (Fig2F). It neatly separates each quartile into four obvious groups. However, we also found that our life expectancy dataset required about twenty-five principle components to explain 90% of the variance in our model (see S.Fig1G), so despite its seemingly accurate divisions, this graphic is limited by its two dimensions. We would need many more to visualize how the data is truly clustering.\n\n\n\nFigure 2F: K-means clustering (k=4) for Life Expectancy Model\n\n\n\n\nInfant Mortality\n\n\n\nFigure 3A: Median Infant Mortality Rate by State.\n\n\nFigure 3A shows a difference between median infant mortality rates between states. Note that the chart appears to “stair-step” as Infant Mortality Rate are represented as integers rather than continuous numbers. Because of the linear trend associated with each state, we included the variable in our linear model to determine which states were significantly correlated with infant mortality.\n\n\n\nFigure 3B: Significance of State for Infant Mortality.\n\n\nFigure 3B shows which states were positively or negatively correlated with infant mortality. Note this map has negative significance in green since that would mean less infant mortality. In this case, Maryland and Mississippi have significantly higher rates of infant mortality.\nIn terms of preventative healthcare measures that were significantly correlated with infant mortality (Figure 3C), we found that Median Household Income and Broadband Internet Access were significantly correlated in the negative direction with infant mortality. That is, as income and access to the Internet increased, infant mortality rates decreased. We came across the same issue with segregation here as we did in our life expectancy model. The Segregation Index coefficient shows that as segregation increases, infant mortality rates increase as well.\n\n\n\nFigure 3C: Infant Mortality Linear Model Coefficients.\n\n\nIn our machine learning model, we repeated the same process for infant mortality rate as for life expectancy, but got a low accuracy score of 36% due to the high number of NAs in our Infant Mortality Rate column. Future analyses would do well to increase record-keeping of infant mortality rates by county as the metric “indicates the current health status of a population and reflects the overall state of maternal health, as well as the quality and accessibility of primary health care available to pregnant women and infants.”³\n\n\nAge Adjusted Death Rate\n\n\n\nFigure 4A: Median Mortality Rate by State.\n\n\nAge-adjusted death rate (mortality rate) appeared to vary across states as seen in Figure 4A, so we again kept state in our linear model. Figure 4B shows which states were significantly correlated with mortality rate. Negative correlation is in green (AZ) showing a significantly lower death rate in Arizona. Positive correlation is in red, showing significantly higher death rates.\n\n\n\nFigure 4B: Significance of State for Age Adjusted Death Rate (Mortality Rate).\n\n\nPreventative healthcare measures that were significantly correlated with mortality rate are shown in figure 4C. As food insecurity, segregation (excluding residential segregation), and school segregation increased, mortality rates increased as well. As broadband internet access, vaccination, and number of rural residents increased, mortality rates decreased.\nLooking at demographics, we noticed as income increased among white Americans, mortality rates decreased. This income trend was the opposite among Asian and Hispanic Americans. Looking closer at the income correlation plots, the trends for Asian and Hispanic Americans appear to have more data points that could be considered outliers. As the percentage of severe housing issues increased, the mortality rate decreased, but the correlation plot appears to have outliers that could be skewing this trend as well.\n\n\n\nFigure 4C: Age Adjusted Death Rate (Mortality Rate) Linear Model Coefficients.\n\n\nFinally, we repeated our machine learning process to predict age-adjusted death rate based on our significant access to care covariates. Our model accurately predicted the binned death rate for 62% of our test data. Just thirteen access-to-care-related covariates predicted mortality rate 62% of the time! This again emphasizes the importance of access to care in one’s overall health status.\nKMeans clustering again found four apparent clusters within our data along its first two principle components. As with the life expectancy data, we found that our data needs 30 components to explain 90% of its variance, so this two dimensional plot is missing a lot of further details that would otherwise be revealed by a multi-dimensional graphic.\n\n\n\nFigure 4D: K-means clustering (k=4) for Age-Adjusted Death Rate Model"
  },
  {
    "objectID": "capstone.html#predicting-chronic-conditions-based-on-medicaid-data",
    "href": "capstone.html#predicting-chronic-conditions-based-on-medicaid-data",
    "title": "United States’ Health Quality",
    "section": "Predicting Chronic Conditions Based On Medicaid Data",
    "text": "Predicting Chronic Conditions Based On Medicaid Data\nTo answer the question of how state insurance in particular impacts one’s health status, we evaluated two common chronic conditions in the United States, diabetes and cardiovascular disease.\n\nDiabetes\nWe immediately plotted our mean diabetes percentages by Medicaid percentage across states to see if any obvious correlation existed (see Fig5B). No correlation was obvious, but there appeared to be a slight linear trend. We created a linear regression model predicting diabetes prevalence by many Medicaid-related covariates, such as how many adults did not see a doctor in the past twelve months due to cost, state Medicaid expenditure, state Medicaid spending, total Medicaid spending, and population percentage on Medicaid. Our simple model showed a surprising 38% accuracy in predicting how many people in a given population would have diabetes based on these factors. While Medicaid-related factors may not be able to completely predict diabetes prevalence, it certainly plays a role.\n\n\n\nFigure 5A: Mean diabetes percentage per state vs Medicaid percentage\n\n\n\n\nCardiovascular Disease (CVD)\nAs with our diabetes dataset, we again repeated the above process to predict CVD prevalence based on Medicaid-only related factors. Our simple scatterplot shows a faint linear trend and two potential clusters. Shockingly, our model accurately predicted CVD prevalence 46% of the time! This is such a high number that it cannot be ignored, and we can assume Medicaid plays some factor in a population’s cardiovascular disease prevalence.\n\n\n\nFigure 5B: Mean CVD Percentage per State vs Medicaid Percentage"
  },
  {
    "objectID": "capstone.html#creating-an-overall-health-quality-variable",
    "href": "capstone.html#creating-an-overall-health-quality-variable",
    "title": "United States’ Health Quality",
    "section": "Creating an Overall Health Quality Variable",
    "text": "Creating an Overall Health Quality Variable\nAs a final metric for assessing quality of health, we wanted to create a new variable that represented the overall health of a population. We knew that the following variables should be included in the creation of this new variable: Life Expectancy, Age-Adjusted Death Rate, Years of Potential Life Lost Rate, Percent of Frequent Physical Distress Days, and Percent of Frequent Mental Distress Days. We chose the first three for the same reasons explained in the introduction to our results.3 Note that we left out Infant Mortality Rate due to its high number of NAs, as explained above. We added the final two metrics to account for a person’s perceived quality of life, which does influence’s one’s actual health quality. A clear linear relationship is seen between each of these metrics in the pair plot below (Fig 6A).\n\n\n\nFigure 6A: Health Metrics Pair Plot\n\n\nThough the first eigenvalue of our entire dataset only explained 31% of the variance in our dataset, we continued by projecting the variables above to this first eigenvalue, thus “creating” a new variable that represents overall health. We then plotted the weights of all of our other variables against this new one to see how much each contributed to overall health. 87 of our original features contributed negatively to this new variable and 35 positively. Fig6B shows which features contribute the most in both a positive and negative direction to health.\n\n\n\nFigure 6B: Top 5 High and Bottom 5 Low Weights"
  },
  {
    "objectID": "capstone.html#supplemental-tables",
    "href": "capstone.html#supplemental-tables",
    "title": "United States’ Health Quality",
    "section": "Supplemental Tables",
    "text": "Supplemental Tables\n\nS.Table 1A: CSV containing all variables used to assess access to care\n\n Download S.Table 1A\n\n\n\n\nS.Table 1B: CSV containing all variables used to assess weight contribution to new variable\n\n Download S.Table 1B"
  },
  {
    "objectID": "capstone.html#supplemental-figures",
    "href": "capstone.html#supplemental-figures",
    "title": "United States’ Health Quality",
    "section": "Supplemental Figures",
    "text": "Supplemental Figures\n\n\n\n\n\n\nFigure 1: S.Figure 1A: KBest Features for Life Expectancy\n\n\n\n\n\n\nS.Figure 1B: KBest Features for Infant Mortality Rate\n\n\n\n\n\nS.Figure 1C: KBest Features for Death Rate\n\n\n\n\n\nS.Figure 1D: Distribution of Life Expectancy Quartiles\n\n\n\n\n\nS.Figure 1E: Confusion Matrix for Life Expectancy Model\n\n\n\n\n\nS.Figure 1F: Confusion Matrix for Death Rate Model\n\n\n\n\n\nS.Figure 1G: Variance Explained by each Principle Component in the Life Expectancy Model\n\n\n\n\n\nS.Figure 1H: Variance Explained by each Principle Component in the Infant Mortality Model\n\n\n\n\n\nS.Figure 1I: Variance Explained by each Principle Component in the Death Rate Model\n\n\n\n\n\nS.Figure 1J: Explained Variance by Eigenvalue for Entire Dataset"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "United States’ Health Quality",
    "section": "",
    "text": "To help answer questions regarding the effectiveness of preventative care, we investigated current relationships between health care, access to care, public health insurance, and overall health outcomes across the United States. We explored how primary care and prevenatitive measures impact standard health metrics, such as life expectancy, mortality, and infant mortality. We compared these metrics across demographics and insurance models (public versus private). By examining these factors, we aimed to contribute to the understanding of how preventative care can help improve public health in the United States."
  },
  {
    "objectID": "index.html#data-ingestion",
    "href": "index.html#data-ingestion",
    "title": "United States’ Health Quality",
    "section": "Data Ingestion",
    "text": "Data Ingestion\nWe gathered data from two sources: KFF (an independent source for health policy research, polling, and news)⁶ and County Health Rankings and Roadmaps (CHRR).²\n\nKFF: Collection and Cleaning\nWe generated a custom report from data available on KFF, downloading a large variety of data from 2017-2022 (not including 2020 due to lack of data collection) for each state in the US. Variables we investigated from this dataset included percentage of population on Medicare, percentage of adults who smoke, healthcare expenditure, median annual household income, cervical cancer incidence rate, and many more potentially relevant factors.⁶\nKFF data for each state was downloaded as CSVs. We chose the most recent dates for all of the different health and insurance related questions between 2017-2022. The CSVs originally had a question, state, and value field. We used text parsing to create a column called demographic and a column called group. This allowed us to parse out demographics like age, race/ethnicity, poverty level and create groups within each of those.\nWe also created fields called year and measure, and parsed out the years and measurements from the question field. Some questions had multiple demographics, so we created a secondary_demographic field and a secondary_group field. These are not ranked.\nFinally, we added a county column (which we filled with all NA) and edited the state and question fields to replicate the way that data from our CHFF dataset was formatted. This allowed us to merge the two datasets.\n\n\nCHRR: Collection and Cleaning\nSimilar to KFF, we downloaded data for each state from 2017-2022 (not including 2020 due to lack of data collection) from County Health Rankings and Roadmaps (CHRR). We chose the “20xx County Health Release National Data” links for each year. Data from CHRR originally came in two separate CSVs for each year and broke up the data by each county in the United States. This data included metrics such as life_expectancy, age-adjusted_death_rate, years_of_potential_life_loss_rate, food_environment_index, percentage_of_physically_inactive_adults, percentage_of_excessive_drinking, Primary_Care_Provider_ratio, and much more.²\nFirst, we cleaned up the columns. We reviewed the documentation and renamed any potentially confusing column names. For example, #_Medicaid_Enrollees became no_female_medicaid_enrollees to avoid mistakenly believing the first column included both genders in its count. We dropped columns that would not be of help to us, such as the 95% CI - Low and 95% CI - High columns, as our dataset did not describe how these confidence intervals were found. We replaced all spaces with an underscore.\nSecond, we joined the two CSVs for each year to have one CSV per year and added a Year column to help with merging later.\nFinally, we reformatted the CSVs to match that of the KFF data, where our original columns became the question column and the values filled in a new values column. Again, we used text parsing such as grepl and gsub to fill in our newly created demographic, measure, group, secondary_demographic, and secondary_group, columns. For example, if our question was mean_%_Children_in_Poverty_(white), our demographic, group, secondary_demographic, and secondary_group columns became “Race/Ethnicity”, “White”, “Age”, and “0-17”, respectively.\nSince the questions and potential answers collected by CHRR data varied each year, we made sure that our cleaning code was modified for each year to both accommodate the changes in the data and match identical answers from previous years. As an example, the only races that were listed as options in the 2017 data were “White”, “Black”, “Hispanic”, and “Asian”. However, by the 2022 data collection, the options had expanded to include “American Indian/Alaskan Native”, “Native Hawaiian/Other Pacific Islander”, and “Other/Multiple Races.” In 2022, “Black” was changed to “African American,” so we changed it back to “Black” to both match the earlier CHRR data and the KFF data."
  },
  {
    "objectID": "index.html#data-organization",
    "href": "index.html#data-organization",
    "title": "United States’ Health Quality",
    "section": "Data Organization",
    "text": "Data Organization\nData was combined and normalized to third normal form. The ids were primary keys for each table except for question_responses, where state_id, year_id, and question_id were used as a compound primary key. We used the same foreign key for group and secondary_group and another separate foreign key for both type and secondary_type. All columns had a NOT NULL constraint except for unit_type from the unit table, and unit_id, secondary_group_id, and secondary_type_id from question_responses.\n\n\n\nERD."
  },
  {
    "objectID": "index.html#data-analysis",
    "href": "index.html#data-analysis",
    "title": "United States’ Health Quality",
    "section": "Data Analysis",
    "text": "Data Analysis\n\nStatistical Thinking\nWe determined health status using commonly used markers (proxies) such as life expectancy and mortality rates.³ We used statistics (log rank tests) and modeling (Kaplan-Meier curves and linear regression) to determine how access to preventative care correlates with health status. We compared proportions across states to account for differences in population.\nIn our linear models created in R, we first took the natural logarithm of income-related data due to both its skewed distribution and disproportionate scale (in comparison to the rest of our data).\n\n\n\n\n\n\nWhat are these statistical tests?\n\n\n\n\n\noptional text\n\n\n\n\n\n\n\n\nLog Rank Test\nKaplan-Meier Curve\nLinear Regression\n\n\n\n\ntext\ntext\ntext\n\n\n\n\n\n\n\n\nData Visualization\nWe used data visualization as part of both our exploratory data analysis and in our final outcome. We created maps of the United States to determine if there is a spatial relationship between our variables and quality of health. Various other visualizations were displayed from our statistical analysis and machine learning product, such as Kaplan-Meier curves, graphs of K-Best’s top features, confusion matrices, and K-Means and/or Gaussian Mixture Model scatterplots, where appropriate.\n\n\nData Engineering\nWe stored our data into a relational database and accessed it with Postgresql (through Railway). We accessed our data in both R and Python using the RPostgreSQL and sqlalchemy libraries, respectively. A detailed description for how this was done is in the data section above.\n\n\nMachine Learning\nWe used machine learning models such as ensembles, logistic regression, random forest, naive bayes, PCA, KMeans, Gaussian Mixture Models, and more to explore relationships and predict health outcomes from our data. For example, we predicted metrics like life expectancy based on our access to care variables. We also predicted the prevalence of common chronic conditions, such as Diabetes, within each state based on the percentage of people on Medicaid. Finally, we created a new variable that represented overall health quality.\n\n\n\n\n\n\nWhat are these models?\n\n\n\n\n\n\nModel Optimization\n\n\n\nK-Best Feature Selection\nConfusion Matrices\n\n\n\n\ntext\ntext\n\n\n\n\n\nSupervised Classification Models\n\n\n\n\n\n\n\n\n\nRandom Forests\nNaive Bayes\nLogistic Regression\nEnsemble\n\n\n\n\ntext\n\n\n\n\n\n\n\n\nUnsupervised Dimension Reduction Model\n\n\n\nPCA\n\n\n\n\ntext\n\n\n\n\n\nUnsupervised Clustering Models\n\n\n\nK-Means\nGaussian Mixture Model\n\n\n\n\ntext\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nProcess outline for predicting health by access to care:\n\n\n\n\n\n\nCreate our desired dataframe by reading in data from our remote database and joining where necessary.\nPreprocess:\n\nDrop NAs while optimizing data frame size via trial and error.\nUse StandardScaler and OneHotEncoder tools from sklearn to transform our numeric and categorical data, respectively.\n\nUse KMeans to find the top 10 features from each model (see Figure 1, @Supplemental_Figure_1B, and @Supplemental_Figure_1C). Combine these variables with significant variables from the linear regression models completed in R.\nContinue preprocessing with the reduced dataset (using only variables from step 3)\n\nBin and modify data as necessary. This ensured equal representation across classes for each predicted y variable. A. In order to use classification tools such as RandomForestClassifier or GradientBoostingClassifier, we binned all our data by quartiles before running it through our models. B. For life expectancy, we dropped outliers first (ages below 60 and above 90, see Supplemental Figure 1D).\nTrain/test split dataset\n\nCreate model\n\nUse LogisticRegression, RandomForestClassifier, GradientBoostingClassifier, CategoricalNaiveBayes, and Ensemble. Find which model performs the best.\nHyperparameterize the model that works best from step 5a.\nCross validate finalized model\nTest on testing data to find true accuracy\nConfusion matrix to see what went wrong (see Supplemental Figures 1E and 1F).\n\nAdd PCA to the model\n\nDetermine how many components explain 90% variance in the model (see Supplemental Figures 1G-1I).\nAdd PCA with that number of components to the optimized pipeline made from Step 5.\n\n\n\n\n\n\n\n\n\n\n\nProcess outline for predicting health by prevalence of a disease based on Medicaid-related variables:\n\n\n\n\n\n\nManipulate data to find mean prevalence of the disease by state. Use this state-wide data rather than the county data as the Medicaid covariates were only available by state.\nPreprocess, split, and model the data as outlined above.\n\n\n\n\n\n\n\n\n\n\nProcess outline for creating a new variable:\n\n\n\n\n\n\nGather our entire dataset (not just access to care related variables) See Supplemental Table 1B for a list of all variables used.\nPreprocess the dataset using StandardScaler and OneHotEncoder to the appropriate columns.\nUse PCA to see how much variance can be explained by the first eigenvalue (see Supplemental Figure 1J).\nProject desired health variables to the first eigenvalue.\nCompare weights of all variables to see how much they each contribute to this “new variable.”\n\n\n\n\n\n\nData Ethics\nWe were wary of furthering the gap between classes, races, and/or genders. Often, those in lower socioeconomic status tend to have lower quality of health and less access to affordable healthcare. Our goal was not to perpetuate this gap but to find potential solutions for these underserved populations. We also recognized that our datasets were incomplete and that we were not be able to represent everyone’s needs. Those who are not using well-known forms of insurance, such as Direct Primary Care, or who are not seeking traditional medical care are not represented."
  },
  {
    "objectID": "index.html#introduction-1",
    "href": "index.html#introduction-1",
    "title": "United States’ Health Quality",
    "section": "Introduction",
    "text": "Introduction\nIn order to evaluate the health status of a group of people, we turned to three common metrics for doing so: life expectancy, mortality, and infant mortality.³ In the following sections, we modeled each of these by a list of variables representing access to care (Supplemental Table 1A). Our goal was to determine how access to care influenced each of these three metrics for determining health of a population."
  },
  {
    "objectID": "index.html#analyzing-impact-of-access-to-care-on-health-metrics",
    "href": "index.html#analyzing-impact-of-access-to-care-on-health-metrics",
    "title": "United States’ Health Quality",
    "section": "Analyzing Impact of Access to Care on Health Metrics",
    "text": "Analyzing Impact of Access to Care on Health Metrics\n\nLife Expectancy\n\n\n\nFig 2A: Median Life Expectancy by State.\n\n\nFigure 2A demonstrates how median life expectancy varies by state. We decided to keep state in our linear model because it did have a significant correlation with life expectancy. Since not all of the states were significantly correlated, we created the following plot to show which states were significantly correlated (positively or negatively) with life expectancy, as is seen in Figure 2B.\n\n\n\nFigure 2B: Map of State Significance for Life Expectancy.\n\n\nFigure 2C shows our linear model for preventative healthcare measures and life expectancy. We found that Primary Care Physician (PCP) Rate and Ratio were both positively correlated with life expectancy. Percentage of Food Insecurity was negatively correlated with life expectancy (that is, as food insecurity increased, life expectancy decreased). Percentage of Access to Broadband Internet was also positively correlated with life expectancy.\nThese were all expected, but what was surprising was that the Residential Segregation Index was positively correlated with life expectancy but the opposite relationship was found for the Segregation Index. While we expected to see Segregation Index negatively correlated with life expectancy, it seems to be paradoxical that the opposite was true for the Residential Segregation Index. We realized that our Residential Segregation Index had a lot of missing values, so plotting it against life expectancy didn’t reveal any visible trend. To improve this model in the future, we would remove this predictor.\n\n\n\nFigure 2C: Life Expectancy Linear Model Coefficients.\n\n\nTo better understand the survival (life expectancy) of different groups for each of these variables, we created Kaplan-Meier (KM) Curves where we plotted each variable by quartile. We then conducted a log rank test to compare across quantiles to see if the groups were significantly different from each other. Figure 2D shows life expectancy based on the percentage of food insecurity. Figure 2E shows the results of the log rank test (which are significant as p = &lt;2e-16). Quantiles 1 and 2 (less food insecurity) observed less death than expected, but quantiles 3 and 4 (more food insecurity) observed more death than expected. This demonstrates that we are seeing a significant difference between life expectancy of people in the lower versus the higher quantiles of food insecurity.\n\n\n\nFigure 2D: Kaplan-Meier Curve for Life Expectancy and Percentage of Food Insecurity.\n\n\n\n\n\nFigure 5: Log Rank Test Results for Life Expectancy and Percentage of Food Insecurity.\n\n\nKaplan-Meier Curves for life expectancy were made with the following variables: PCP Rate and Ratio, Percentage of Food Insecurity, Segregation Index, and Percentage of Broadband Internet Access. Log rank tests were performed, and all of the results were significant. To explore the curves and log rank test results, please explore our gallery below:\n–add a gallery here but ran out of time–\nWe then used machine learning algorithms to predict life expectancy of individuals based on these significant covariates along with the top ten features found through KBest (see Supplemental Figure 1A). It is important to note that a lot of features were found in both the linear regression model explained above and in the KBest result.\nOur model predicted life expectancy based only on the fifteen significant access-to-care-related variables with 56% accuracy. While this may at first appear unimpressive, it’s important to note that 56% of life expectancy can be predicted or explained by only fifteen items- all of which relate to one’s access to healthcare. Only the remaining 44% can be explained by all other factors in a person’s life.\nUsing the clustering method KMeans, we found the predicted clusters of our life expectancy quartiles projected on its first two principle components (Fig2F). It neatly separates each quartile into four obvious groups. However, we also found that our life expectancy dataset required about twenty-five principle components to explain 90% of the variance in our model (see S.Fig1G), so despite its seemingly accurate divisions, this graphic is limited by its two dimensions. We would need many more to visualize how the data is truly clustering.\n\n\n\nFigure 2F: K-means clustering (k=4) for Life Expectancy Model\n\n\n\n\nInfant Mortality\n\n\n\nFigure 3A: Median Infant Mortality Rate by State.\n\n\nFigure 3A shows a difference between median infant mortality rates between states. Note that the chart appears to “stair-step” as Infant Mortality Rate are represented as integers rather than continuous numbers. Because of the linear trend associated with each state, we included the variable in our linear model to determine which states were significantly correlated with infant mortality.\n\n\n\nFigure 3B: Significance of State for Infant Mortality.\n\n\nFigure 3B shows which states were positively or negatively correlated with infant mortality. Note this map has negative significance in green since that would mean less infant mortality. In this case, Maryland and Mississippi have significantly higher rates of infant mortality.\nIn terms of preventative healthcare measures that were significantly correlated with infant mortality (Figure 3C), we found that Median Household Income and Broadband Internet Access were significantly correlated in the negative direction with infant mortality. That is, as income and access to the Internet increased, infant mortality rates decreased. We came across the same issue with segregation here as we did in our life expectancy model. The Segregation Index coefficient shows that as segregation increases, infant mortality rates increase as well.\n\n\n\nFigure 3C: Infant Mortality Linear Model Coefficients.\n\n\nIn our machine learning model, we repeated the same process for infant mortality rate as for life expectancy, but got a low accuracy score of 36% due to the high number of NAs in our Infant Mortality Rate column. Future analyses would do well to increase record-keeping of infant mortality rates by county as the metric “indicates the current health status of a population and reflects the overall state of maternal health, as well as the quality and accessibility of primary health care available to pregnant women and infants.”³\n\n\nAge Adjusted Death Rate\n\n\n\nFigure 4A: Median Mortality Rate by State.\n\n\nAge-adjusted death rate (mortality rate) appeared to vary across states as seen in Figure 4A, so we again kept state in our linear model. Figure 4B shows which states were significantly correlated with mortality rate. Negative correlation is in green (AZ) showing a significantly lower death rate in Arizona. Positive correlation is in red, showing significantly higher death rates.\n\n\n\nFigure 4B: Significance of State for Age Adjusted Death Rate (Mortality Rate).\n\n\nPreventative healthcare measures that were significantly correlated with mortality rate are shown in figure 4C. As food insecurity, segregation (excluding residential segregation), and school segregation increased, mortality rates increased as well. As broadband internet access, vaccination, and number of rural residents increased, mortality rates decreased.\nLooking at demographics, we noticed as income increased among white Americans, mortality rates decreased. This income trend was the opposite among Asian and Hispanic Americans. Looking closer at the income correlation plots, the trends for Asian and Hispanic Americans appear to have more data points that could be considered outliers. As the percentage of severe housing issues increased, the mortality rate decreased, but the correlation plot appears to have outliers that could be skewing this trend as well.\n\n\n\nFigure 4C: Age Adjusted Death Rate (Mortality Rate) Linear Model Coefficients.\n\n\nFinally, we repeated our machine learning process to predict age-adjusted death rate based on our significant access to care covariates. Our model accurately predicted the binned death rate for 62% of our test data. Just thirteen access-to-care-related covariates predicted mortality rate 62% of the time! This again emphasizes the importance of access to care in one’s overall health status.\nKMeans clustering again found four apparent clusters within our data along its first two principle components. As with the life expectancy data, we found that our data needs 30 components to explain 90% of its variance, so this two dimensional plot is missing a lot of further details that would otherwise be revealed by a multi-dimensional graphic.\n\n\n\nFigure 4D: K-means clustering (k=4) for Age-Adjusted Death Rate Model"
  },
  {
    "objectID": "index.html#predicting-chronic-conditions-based-on-medicaid-data",
    "href": "index.html#predicting-chronic-conditions-based-on-medicaid-data",
    "title": "United States’ Health Quality",
    "section": "Predicting Chronic Conditions Based On Medicaid Data",
    "text": "Predicting Chronic Conditions Based On Medicaid Data\nTo answer the question of how state insurance in particular impacts one’s health status, we evaluated two common chronic conditions in the United States, diabetes and cardiovascular disease.\n\nDiabetes\nWe immediately plotted our mean diabetes percentages by Medicaid percentage across states to see if any obvious correlation existed (see Fig5B). No correlation was obvious, but there appeared to be a slight linear trend. We created a linear regression model predicting diabetes prevalence by many Medicaid-related covariates, such as how many adults did not see a doctor in the past twelve months due to cost, state Medicaid expenditure, state Medicaid spending, total Medicaid spending, and population percentage on Medicaid. Our simple model showed a surprising 38% accuracy in predicting how many people in a given population would have diabetes based on these factors. While Medicaid-related factors may not be able to completely predict diabetes prevalence, it certainly plays a role.\n\n\n\nFigure 5A: Mean diabetes percentage per state vs Medicaid percentage\n\n\n\n\nCardiovascular Disease (CVD)\nAs with our diabetes dataset, we again repeated the above process to predict CVD prevalence based on Medicaid-only related factors. Our simple scatterplot shows a faint linear trend and two potential clusters. Shockingly, our model accurately predicted CVD prevalence 46% of the time! This is such a high number that it cannot be ignored, and we can assume Medicaid plays some factor in a population’s cardiovascular disease prevalence.\n\n\n\nFigure 5B: Mean CVD Percentage per State vs Medicaid Percentage"
  },
  {
    "objectID": "index.html#creating-an-overall-health-quality-variable",
    "href": "index.html#creating-an-overall-health-quality-variable",
    "title": "United States’ Health Quality",
    "section": "Creating an Overall Health Quality Variable",
    "text": "Creating an Overall Health Quality Variable\nAs a final metric for assessing quality of health, we wanted to create a new variable that represented the overall health of a population. We knew that the following variables should be included in the creation of this new variable: Life Expectancy, Age-Adjusted Death Rate, Years of Potential Life Lost Rate, Percent of Frequent Physical Distress Days, and Percent of Frequent Mental Distress Days. We chose the first three for the same reasons explained in the introduction to our results.3 Note that we left out Infant Mortality Rate due to its high number of NAs, as explained above. We added the final two metrics to account for a person’s perceived quality of life, which does influence’s one’s actual health quality. A clear linear relationship is seen between each of these metrics in the pair plot below (Fig 6A).\n\n\n\nFigure 6A: Health Metrics Pair Plot\n\n\nThough the first eigenvalue of our entire dataset only explained 31% of the variance in our dataset, we continued by projecting the variables above to this first eigenvalue, thus “creating” a new variable that represents overall health. We then plotted the weights of all of our other variables against this new one to see how much each contributed to overall health. 87 of our original features contributed negatively to this new variable and 35 positively. Fig6B shows which features contribute the most in both a positive and negative direction to health.\n\n\n\nFigure 6B: Top 5 High and Bottom 5 Low Weights"
  },
  {
    "objectID": "index.html#supplemental-tables",
    "href": "index.html#supplemental-tables",
    "title": "United States’ Health Quality",
    "section": "Supplemental Tables",
    "text": "Supplemental Tables\n\nS.Table 1A: CSV containing all variables used to assess access to care\n\n Download S.Table 1A\n\n\n\n\nS.Table 1B: CSV containing all variables used to assess weight contribution to new variable\n\n Download S.Table 1B"
  },
  {
    "objectID": "index.html#supplemental-figures",
    "href": "index.html#supplemental-figures",
    "title": "United States’ Health Quality",
    "section": "Supplemental Figures",
    "text": "Supplemental Figures\n\n\n\n\n\n\nFigure 1: S.Figure 1A: KBest Features for Life Expectancy\n\n\n\n\n\n\nS.Figure 1B: KBest Features for Infant Mortality Rate\n\n\n\n\n\nS.Figure 1C: KBest Features for Death Rate\n\n\n\n\n\nS.Figure 1D: Distribution of Life Expectancy Quartiles\n\n\n\n\n\nS.Figure 1E: Confusion Matrix for Life Expectancy Model\n\n\n\n\n\nS.Figure 1F: Confusion Matrix for Death Rate Model\n\n\n\n\n\nS.Figure 1G: Variance Explained by each Principle Component in the Life Expectancy Model\n\n\n\n\n\nS.Figure 1H: Variance Explained by each Principle Component in the Infant Mortality Model\n\n\n\n\n\nS.Figure 1I: Variance Explained by each Principle Component in the Death Rate Model\n\n\n\n\n\nS.Figure 1J: Explained Variance by Eigenvalue for Entire Dataset"
  }
]